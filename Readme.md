# Технические подробности
## Протокол взаимодействия с игровым сервером
Общение происходит посредством стандартного ввода и стандартного вывода.
Все сообщения занимают одну строку и заканчиваются переводом строки.

Когда ваша программа готова, она должна вывести сообщение `ready`.
После этого она сыграет в какое-то количество раундов. В начале каждого раунда на вход подается сообщение `game`. В ответ программа должна вывести выбранное ей число. Оно должно быть целым и влезать в беззнаковый 32-битный тип. Когда раунд завершен, на вход подается информация обо всех ходах, сделанных в этом раунде: список этих ходов, разделенных пробелами (ход вашей программы там тоже есть).

Когда игра завершена, вместо сообщения `ready` вы получите сообщение `end`.  После этого дальнейшие сообщения не поступают, а ваша программа должна завершиться.

Файл `silly.py` реализует очень простую стратегию, соблюдающую протокол.
## Локальный запуск
Для вашего удобства, у вас есть возможность запустить игровой сервер локально. Он автоматически скомпилирует и запустит программы, и подведет итоги.
### Сборка из исходников
Необходимо иметь git и [Rust](https://rust-lang.org)
```bash
git clone https://github.com/mikailbag/simple-game
cd simple-game
cargo run config.yaml
```
### Сборка Docker-образа
Необходимо иметь свежий Докер (я не проверял версии старше чем 19.03).
```bash
export DOCKER_BUILDKIT=1
docker build -t <тег> -f Cargo.toml
```
### Запуск
Для запуска необходимо подготовить конфигурационный файл в формате [yaml](yaml.org):
```yaml
# Список программ, участвующих в матче
programs:
   - path/to/strategy1.py
   - path/to/strategy2.py
# Сколько раундов надо сыграть
rounds: 10
# Docker-образ, в котором будет запускаться ваше решение. Если параметр отсутствует, решение будет выполняться без изоляции.
# Рекомендуется к использованию только если вы собираетесь запускать недоверенные решения.
image: <образ>
```